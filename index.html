<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Proyecto Avanzado de Linealizaci√≥n</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div class="container">
        <div class="top-bar">
            <div class="example-selector">
                <label for="exampleSelect">Cargar un ejemplo:</label>
                <select id="exampleSelect">
                    <option value="custom">-- Personalizado --</option>
                </select>
            </div>
            <div class="dark-mode-toggle">
                <label for="darkModeSwitch" class="switch-label">Modo Oscuro</label>
                <label class="switch">
                    <input type="checkbox" id="darkModeSwitch" aria-label="Activar modo oscuro">
                    <span class="slider-toggle"></span>
                </label>
            </div>
            <button id="helpBtn" class="help-btn" title="Ayuda o informaci√≥n sobre la p√°gina" aria-label="Ayuda">?</button>
        </div>

        <header>
            <h1>Linealizaci√≥n de Funciones</h1>
            <p>
                Utiliza la <strong>Serie de Taylor</strong> para aproximar funciones no lineales con polinomios de primer y segundo orden.
                <br>
                <span class="info-link" id="aboutOpen" tabindex="0">(¬øQu√© es la Linealizaci√≥n?)</span>
            </p>
        </header>

        <main>
            <div id="error-container" class="error-message" style="display: none;" role="alert"></div>

            <div class="input-section">
                <div class="form-group large">
                    <label for="functionInput">Funci√≥n No Lineal f(x):</label>
                    <input type="text" id="functionInput" autocomplete="off" placeholder="Ej: sin(x) + x^2">
                </div>
                <div class="form-group small">
                    <label for="x0Input">Punto de Linealizaci√≥n (x‚ÇÄ):</label>
                    <input type="number" id="x0Input" step="0.1">
                </div>
                <div class="form-group medium">
                    <label for="x0Slider">Control Deslizante:</label>
                    <input type="range" id="x0Slider" min="-10" max="10" step="0.1" class="slider">
                </div>
                <button id="calculateBtn">Calcular y Graficar</button>
            </div>
            
            <div class="input-section units-section">
                <div class="form-group small">
                    <label for="unitXInput">Unidad de x:</label>
                    <input type="text" id="unitXInput" placeholder="Ej: s">
                </div>
                <div class="form-group small">
                    <label for="unitYInput">Unidad de f(x):</label>
                    <input type="text" id="unitYInput" placeholder="Ej: m">
                </div>
            </div>

            <div class="output-container">
                <div class="results-column">
                    <div id="results" class="results-section" style="display: none;">
                        <h2>Resultados del C√°lculo</h2>
                        <div id="fx0Output"></div>
                        <div id="derivative1Output"></div>
                        <div id="derivative2Output"></div>
                        <div id="linearFunctionOutput">
                            <button id="copyLinearBtn" class="copy-btn" title="Copiar f√≥rmula" style="display:none;">üìã</button>
                        </div>
                        <div id="quadraticFunctionOutput">
                            <button id="copyQuadraticBtn" class="copy-btn" title="Copiar f√≥rmula" style="display:none;">üìã</button>
                        </div>
                    </div>
                    
                    <div id="ai-interpretation" class="ai-section" style="display: none;">
                        <h2>Interpretaci√≥n Autom√°tica (IA)</h2>
                        <p id="ai-text"></p>
                    </div>
                </div>
                <div class="chart-column">
                    <div class="chart-container">
                        <canvas id="myChart"></canvas>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Modal de Ayuda/Acerca de -->
    <div id="helpModal" class="modal" aria-modal="true" role="dialog" tabindex="-1">
        <div class="modal-content">
            <span class="close" id="closeModal" tabindex="0" aria-label="Cerrar ayuda">&times;</span>
            <h2>¬øQu√© es la Linealizaci√≥n y la Serie de Taylor?</h2>
            <p>
                La <b>linealizaci√≥n</b> es una t√©cnica matem√°tica que aproxima una funci√≥n no lineal por una funci√≥n polin√≥mica (usualmente lineal o cuadr√°tica) cerca de un punto, facilitando su an√°lisis y resoluci√≥n.
            </p>
            <p>
                La <b>Serie de Taylor</b> permite expresar una funci√≥n f(x) en torno a un punto x‚ÇÄ como la suma de su valor, derivada, segunda derivada, etc. Por ejemplo:
                <br>
                <code>
                    f(x) ‚âà f(x‚ÇÄ) + f'(x‚ÇÄ)(x-x‚ÇÄ) + (1/2)f''(x‚ÇÄ)(x-x‚ÇÄ)¬≤
                </code>
            </p>
            <ul>
                <li><b>Aprox. Lineal:</b> polinomio de 1er orden (recta tangente en x‚ÇÄ).</li>
                <li><b>Aprox. Cuadr√°tica:</b> polinomio de 2¬∫ orden (considera la curvatura).</li>
            </ul>
            <p>
                <b>¬øPor qu√© es √∫til?</b> Permite simplificar y entender sistemas complejos y modelar su comportamiento local.
            </p>
            <hr>
            <p style="font-size:smaller;">Desarrollado por ChJamon. Proyecto educativo. <a href="https://github.com/ChJamon/ChJamon.github.io" target="_blank" rel="noopener">Ver c√≥digo fuente</a></p>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/12.4.1/math.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="script.js"></script>
</body>
</html>
